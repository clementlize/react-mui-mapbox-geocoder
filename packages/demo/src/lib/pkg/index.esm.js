import e,{useRef as t,useEffect as n,useState as r,useCallback as o}from"react";import i from"react-autosuggest";import a from"autosuggest-highlight/match";import u from"autosuggest-highlight/parse";import{Fade as l,LinearProgress as s,useTheme as c,TextField as p,InputAdornment as g,Paper as m,alpha as f,Grid as d,IconButton as h,MenuItem as v,Typography as b,Box as x}from"@mui/material";import E from"@mui/icons-material/Search";import y from"@mui/icons-material/Cancel";import{useDebouncedCallback as C}from"use-debounce";function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function w(e){return null!=e}var S=function(t){var o=t.show,i=void 0!==o&&o,a=r(i),u=a[0],c=a[1],p=C(function(){return c(!0)},250);return n(function(){i?p():(p.flush(),c(!1))},[p,i]),e.createElement(l,{in:u},e.createElement(s,{style:{position:"absolute",width:"100%"}}))},P=["ref","inputClasses"];export default function(s){var C=s.endpoint,j=void 0===C?"https://api.mapbox.com":C,I=s.inputPlaceholder,O=void 0===I?"Search":I,_=s.showLoader,T=void 0===_||_,F=s.source,R=void 0===F?"mapbox.places":F,q=s.onSuggest,B=void 0===q?function(){}:q,U=s.focusOnMount,D=void 0!==U&&U,G=s.showInputContainer,V=void 0===G||G,W=s.inputValue,z=void 0===W?"":W,H=s.proximity,L=s.country,A=s.bbox,M=s.types,N=s.limit,J=s.autocomplete,K=s.language,Q=s.suggestionsPaperProps,X=s.onSelect,Y=s.accessToken,Z=s.onInputFocus,$=s.onInputBlur,ee=s.inputClasses,te=s.inputTextFieldProps,ne=s.disableUnderline,re=s.inputPaperProps,oe=r([]),ie=oe[0],ae=oe[1],ue=r(!1),le=ue[0],se=ue[1],ce=r(new Date),pe=ce[0],ge=ce[1],me=r(z),fe=me[0],de=me[1],he=r(!1),ve=he[0],be=he[1],xe=t(null),Ee=function(e){var r=t();return n(function(){r.current=e},[e]),r.current}(fe),ye=o(function(){var e=(xe.current||{}).input,t=void 0===e?null:e;t&&t.focus()},[]);n(function(){de(z)},[z]),n(function(){D&&ye()},[D,ye]),n(function(){B&&B(ie)},[ie,B]);var Ce=o(function(){de(""),ye()},[ye]),ke=c(),we=o(function(t){var n=t.ref,r=t.inputClasses,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(o[n]=e[n]);return o}(t,P),i=k({},null!=re?re:{}),a=e.createElement(p,k({fullWidth:!0,InputProps:k({disableUnderline:ne,inputRef:n,startAdornment:e.createElement(g,{position:"start"},e.createElement(E,{color:"action"})),classes:r},o)},te));return V?e.createElement(e.Fragment,null,e.createElement(S,{show:le&&T}),e.createElement(m,k({square:!1,elevation:1,sx:{paddingTop:1,paddingBottom:1,paddingRight:1,paddingLeft:2,backgroundColor:ve?ke.palette.background.paper:f(ke.palette.background.paper,.9),overflow:"hidden","&:hover,&:active":{backgroundColor:ke.palette.background.paper},minHeight:"64px",display:"flex",flexDirection:"column",justifyContent:"center"}},i),e.createElement(d,{container:!0,alignItems:"center",spacing:1,wrap:"nowrap"},e.createElement(d,{item:!0,xs:!0,sx:{flexShrink:0,flexGrow:1}},a),e.createElement(l,{in:fe.length>0,unmountOnExit:!0,mountOnEnter:!0},e.createElement(d,{item:!0,xs:!0,sx:{flexGrow:0,flexShrink:1}},e.createElement(h,{"aria-label":"Clear Search Input",onClick:Ce,size:"large"},e.createElement(y,null))))))):e.createElement(e.Fragment,null,a)},[ne,te,V,le,T,ve,re,fe.length,Ce,ke]),Se=o(function(e){be(!0),Z&&Z(e)},[Z]),Pe=o(function(e){be(!1),$&&$(e)},[$]),je=o(function(t){var n=t.children;return e.createElement(m,k({},t.containerProps,{square:!1,elevation:4},Q),n)},[Q]),Ie=o(function(e,t,n){!e&&t&&t.features&&pe<=n&&(ge(n),ae(t.features.map(function(e){return{feature:e,label:e.place_name}}).filter(function(e){return e.label})),se(!1))},[pe]),Oe=o(function(e){var t=e.value;se(!0),Ee===t?se(!1):""===t?(ae([]),se(!1)):function(e,t,n,r,o,i,a,u,l,s,c,p){try{var g,m,f,d,h=new Date;Promise.resolve(function(v,b){try{var x=(g=e+"/geocoding/v5/"+t+"/"+r+".json",m=k({},w(n)&&{access_token:n},w(i)&&{proximity:i&&2===Object.keys(i).length?i.longitude+","+i.latitude:null},w(u)&&{bbox:u&&u.length>0?u.join(","):null},w(l)&&{types:l},w(a)&&{country:a},w(s)&&{limit:s},w(c)&&{autocomplete:c},w(p)&&{language:p}),f=g+"?"+(E=m,Object.keys(E).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(E[e])}).join("&")),Promise.resolve(fetch(f)).then(function(e){return d=e,Promise.resolve(d.json()).then(function(e){return o(null,e,h),{err:null,res:d,searchTime:h}})}))}catch(e){return b(e)}var E;return x&&x.then?x.then(void 0,b):x}(0,function(e){return o(e,null,h),{err:e,res:null,searchTime:h}}))}catch(e){return Promise.reject(e)}}(j,R,Y,t,Ie,H,L,A,M,N,J,K)},[A,L,j,N,K,J,R,H,Ee,Ie,M,Y]),_e=o(function(e,t){return X&&X(t.suggestion.feature),!1},[X]),Te=o(function(){ae([])},[]),Fe=o(function(e,t){de(t.newValue)},[]),Re=o(function(t,n){var r=n.isHighlighted,o=a(t.label,n.query),i=u(t.label,o);return e.createElement(v,{selected:r,component:"div"},e.createElement(b,{noWrap:!0,variant:"subtitle1"},i.map(function(t,n){return e.createElement(b,{key:n,variant:"inherit",sx:{fontWeight:t.highlight?500:300}},t.text)})))},[]),qe=o(function(e){return e.label},[]);return Y?e.createElement(x,{sx:{"& .react-autosuggest__container":{flexGrow:1,position:"relative"},"& .react-autosuggest__suggestions-container--open":{position:"absolute",zIndex:1,marginTop:1,left:0,right:0},"& .react-autosuggest__suggestions-list":{margin:0,padding:0,listStyleType:"none"},"& .react-autosuggest__suggestion":{display:"block",marginBottom:0}}},e.createElement(i,{ref:xe,renderInputComponent:we,suggestions:ie,onSuggestionsFetchRequested:Oe,onSuggestionsClearRequested:Te,onSuggestionSelected:_e,renderSuggestionsContainer:je,getSuggestionValue:qe,renderSuggestion:Re,inputProps:{placeholder:O,value:fe,onChange:Fe,onFocus:Se,onBlur:Pe,className:ee}})):null}
//# sourceMappingURL=index.esm.js.map
