import e,{useRef as n,useEffect as t,useState as r,useCallback as o}from"react";import i from"react-autosuggest";import a from"autosuggest-highlight/match";import u from"autosuggest-highlight/parse";import{Fade as l,LinearProgress as c,useTheme as s,Paper as p,alpha as g,Grid as m,IconButton as f,MenuItem as d,Typography as h,Box as v,TextField as b,InputAdornment as x}from"@mui/material";import E from"@mui/icons-material/Search";import y from"@mui/icons-material/Cancel";import{useDebouncedCallback as C}from"use-debounce";function k(){return(k=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function w(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n.indexOf(t=i[r])>=0||(o[t]=e[t]);return o}function S(e){return null!=e}var P=function(n){var o=n.show,i=void 0!==o&&o,a=r(i),u=a[0],s=a[1],p=C(function(){return s(!0)},250);return t(function(){i?p():(p.flush(),s(!1))},[p,i]),e.createElement(l,{in:u},e.createElement(c,{style:{position:"absolute",width:"100%"}}))},j=["ref","inputClasses"],I=["onFocus"];export default function(c){var C=c.endpoint,O=void 0===C?"https://api.mapbox.com":C,_=c.inputPlaceholder,F=void 0===_?"Search":_,T=c.showLoader,R=void 0===T||T,q=c.source,B=void 0===q?"mapbox.places":q,U=c.onSuggest,D=void 0===U?function(){}:U,G=c.focusOnMount,V=void 0!==G&&G,W=c.showInputContainer,z=void 0===W||W,H=c.inputValue,L=void 0===H?"":H,A=c.proximity,M=c.country,N=c.bbox,J=c.types,K=c.limit,Q=c.autocomplete,X=c.language,Y=c.suggestionsPaperProps,Z=c.onSelect,$=c.accessToken,ee=c.onInputFocus,ne=c.onInputBlur,te=c.inputClasses,re=c.inputTextFieldProps,oe=c.disableUnderline,ie=c.inputPaperProps,ae=r([]),ue=ae[0],le=ae[1],ce=r(!1),se=ce[0],pe=ce[1],ge=r(new Date),me=ge[0],fe=ge[1],de=r(L),he=de[0],ve=de[1],be=r(!1),xe=be[0],Ee=be[1],ye=n(null),Ce=function(e){var r=n();return t(function(){r.current=e},[e]),r.current}(he),ke=o(function(){var e=(ye.current||{}).input,n=void 0===e?null:e;n&&n.focus()},[]);t(function(){ve(L)},[L]),t(function(){V&&ke()},[V,ke]),t(function(){D&&D(ue)},[ue,D]);var we=o(function(){ve(""),ke()},[ke]),Se=s(),Pe=o(function(n){var t=n.ref,r=n.inputClasses,o=w(n,j),i=k({},null!=ie?ie:{}),a=o.onFocus,u=w(o,I);console.log(a),console.log(u);var c=function(){return e.createElement(b,k({variant:"standard",fullWidth:!0,InputProps:k({disableUnderline:oe,inputRef:t,startAdornment:e.createElement(x,{position:"start"},e.createElement(E,{color:"action"})),classes:r},u)},re))};return z?e.createElement(e.Fragment,null,e.createElement(P,{show:se&&R}),e.createElement(p,k({square:!1,elevation:1,sx:{paddingTop:1,paddingBottom:1,paddingRight:1,paddingLeft:2,backgroundColor:xe?Se.palette.background.paper:g(Se.palette.background.paper,.9),overflow:"hidden","&:hover,&:active":{backgroundColor:Se.palette.background.paper},minHeight:"64px",display:"flex",flexDirection:"column",justifyContent:"center"}},i),e.createElement(m,{container:!0,alignItems:"center",spacing:1,wrap:"nowrap"},e.createElement(m,{item:!0,xs:!0,sx:{flexShrink:0,flexGrow:1}},e.createElement(c,null)),e.createElement(l,{in:he.length>0,unmountOnExit:!0,mountOnEnter:!0},e.createElement(m,{item:!0,xs:!0,sx:{flexGrow:0,flexShrink:1}},e.createElement(f,{"aria-label":"Clear Search Input",onClick:we,size:"large"},e.createElement(y,null))))))):e.createElement(c,null)},[oe,re,z,se,R,xe,ie,he.length,we,Se]),je=o(function(e){Ee(!0),ee&&ee(e)},[ee]),Ie=o(function(e){Ee(!1),ne&&ne(e)},[ne]),Oe=o(function(n){var t=n.children;return e.createElement(p,k({},n.containerProps,{square:!1,elevation:4},Y),t)},[Y]),_e=o(function(e,n,t){!e&&n&&n.features&&me<=t&&(fe(t),le(n.features.map(function(e){return{feature:e,label:e.place_name}}).filter(function(e){return e.label})),pe(!1))},[me]),Fe=o(function(e){var n=e.value;pe(!0),Ce===n?pe(!1):""===n?(le([]),pe(!1)):function(e,n,t,r,o,i,a,u,l,c,s,p){try{var g,m,f,d,h=new Date;Promise.resolve(function(v,b){try{var x=(g=e+"/geocoding/v5/"+n+"/"+r+".json",m=k({},S(t)&&{access_token:t},S(i)&&{proximity:i&&2===Object.keys(i).length?i.longitude+","+i.latitude:null},S(u)&&{bbox:u&&u.length>0?u.join(","):null},S(l)&&{types:l},S(a)&&{country:a},S(c)&&{limit:c},S(s)&&{autocomplete:s},S(p)&&{language:p}),f=g+"?"+(E=m,Object.keys(E).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(E[e])}).join("&")),Promise.resolve(fetch(f)).then(function(e){return d=e,Promise.resolve(d.json()).then(function(e){return o(null,e,h),{err:null,res:d,searchTime:h}})}))}catch(e){return b(e)}var E;return x&&x.then?x.then(void 0,b):x}(0,function(e){return o(e,null,h),{err:e,res:null,searchTime:h}}))}catch(e){return Promise.reject(e)}}(O,B,$,n,_e,A,M,N,J,K,Q,X)},[N,M,O,K,X,Q,B,A,Ce,_e,J,$]),Te=o(function(e,n){return Z&&Z(n.suggestion.feature),!1},[Z]),Re=o(function(){le([])},[]),qe=o(function(e,n){ve(n.newValue)},[]),Be=o(function(n,t){var r=t.isHighlighted,o=a(n.label,t.query),i=u(n.label,o);return e.createElement(d,{selected:r,component:"div"},e.createElement(h,{noWrap:!0,variant:"subtitle1"},i.map(function(n,t){return e.createElement(h,{key:t,component:"span",variant:"inherit",sx:{fontWeight:n.highlight?500:300}},n.text)})))},[]),Ue=o(function(e){return e.label},[]);return $?e.createElement(v,{sx:{"& .react-autosuggest__container":{flexGrow:1,position:"relative"},"& .react-autosuggest__suggestions-container--open":{position:"absolute",zIndex:1,marginTop:1,left:0,right:0},"& .react-autosuggest__suggestions-list":{margin:0,padding:0,listStyleType:"none"},"& .react-autosuggest__suggestion":{display:"block",marginBottom:0}}},e.createElement(i,{ref:ye,renderInputComponent:Pe,suggestions:ue,onSuggestionsFetchRequested:Fe,onSuggestionsClearRequested:Re,onSuggestionSelected:Te,renderSuggestionsContainer:Oe,getSuggestionValue:Ue,renderSuggestion:Be,inputProps:{placeholder:F,value:he,onChange:qe,onFocus:je,onBlur:Ie,className:te}})):null}
//# sourceMappingURL=index.esm.js.map
