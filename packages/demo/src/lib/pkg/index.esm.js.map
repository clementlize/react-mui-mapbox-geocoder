{"version":3,"file":"index.esm.js","sources":["../src/MatGeocoder/search.ts","../src/MatGeocoder/debouncedProgressBar/debouncedProgressBar.tsx","../src/MatGeocoder/MatGeocoder.tsx","../src/hooks/usePrevious.ts"],"sourcesContent":["export default async function search(\n  endpoint: string,\n  source: string,\n  accessToken: string,\n  query: string,\n  onResult: (err: any, res: Response | null, searchTime: Date) => void,\n  proximity?: {longitude: number; latitude: number},\n  country?: string,\n  bbox?: number[],\n  types?: string,\n  limit?: number,\n  autocomplete?: boolean,\n  language?: string\n) {\n  const searchTime = new Date();\n  try {\n    const baseUrl = `${endpoint}/geocoding/v5/${source}/${query}.json`;\n    // Don't send empty query params to Mapbox geocoding api.\n    const searchParams = {\n      ...(isNotNil(accessToken) && {access_token: accessToken}),\n      ...(isNotNil(proximity) && {\n        proximity:\n          proximity && Object.keys(proximity).length === 2\n            ? `${proximity.longitude},${proximity.latitude}`\n            : null,\n      }),\n      ...(isNotNil(bbox) && {\n        bbox: bbox && bbox.length > 0 ? bbox.join(',') : null,\n      }),\n\n      ...(isNotNil(types) && {\n        types,\n      }),\n      ...(isNotNil(country) && {\n        country,\n      }),\n      ...(isNotNil(limit) && {\n        limit,\n      }),\n      ...(isNotNil(autocomplete) && {\n        autocomplete,\n      }),\n      ...(isNotNil(language) && {\n        language,\n      }),\n    };\n    const url = `${baseUrl}?${toUrlString(searchParams)}`;\n    const res = await fetch(url);\n    const data = await res.json();\n    onResult(null, data, searchTime);\n    return {err: null, res, searchTime};\n  } catch (err) {\n    onResult(err, null, searchTime);\n    return {err, res: null, searchTime};\n  }\n}\n\nfunction toUrlString(params: any) {\n  return Object.keys(params)\n    .map(\n      (key) => encodeURIComponent(key) + '=' + encodeURIComponent(params[key])\n    )\n    .join('&');\n}\n\nfunction isNotNil(value: unknown) {\n  return value !== undefined && value !== null;\n}\n","import React, {useState, useEffect} from 'react';\nimport {Fade, LinearProgress} from '@mui/material';\nimport {useDebouncedCallback} from 'use-debounce';\n\ntype Props = {\n  show: boolean;\n};\n\nconst DebouncedProgressBar = ({show: showProp = false}: Props) => {\n  const [show, setShow] = useState(showProp);\n\n  const setShowTrue = useDebouncedCallback(() => setShow(true), 250);\n\n  useEffect(() => {\n    if (showProp) {\n      setShowTrue();\n    } else {\n      setShowTrue.flush();\n      setShow(false);\n    }\n  }, [setShowTrue, showProp]);\n\n  return (\n    <Fade in={show}>\n      <LinearProgress style={{position: 'absolute', width: '100%'}} />\n    </Fade>\n  );\n};\n\nexport default DebouncedProgressBar;\n","import React, {useState, useCallback, useEffect, useRef} from 'react';\nimport search from './search';\nimport Autosuggest from 'react-autosuggest';\nimport match from 'autosuggest-highlight/match';\nimport parse from 'autosuggest-highlight/parse';\nimport {\n  Fade,\n  IconButton,\n  InputAdornment,\n  MenuItem,\n  useTheme,\n  Box,\n  Paper,\n  Typography,\n  PaperProps,\n  alpha,\n  InputBase,\n  InputBaseProps,\n  TextField,\n  TextFieldProps,\n} from '@mui/material';\nimport usePrevious from '../hooks/usePrevious';\nimport SearchIcon from '@mui/icons-material/Search';\nimport CancelIcon from '@mui/icons-material/Cancel';\nimport DebouncedProgressBar from './debouncedProgressBar/debouncedProgressBar';\nimport {Result} from './Result';\n\ntype Props = {\n\n  /**\n   * Anytime this value changed, the user input will be overriden with it. WARN: This is not a callback, inputValue won't change when the user types.\n   */\n  inputValue?: string;\n\n  endpoint?: string;\n  source?: string;\n  inputPlaceholder?: string;\n  accessToken: string;\n  proximity?: {longitude: number; latitude: number};\n  country?: string;\n  bbox?: number[];\n  types?: string;\n  limit?: number;\n  autocomplete?: boolean;\n  language?: string;\n  showLoader?: boolean;\n  focusOnMount?: boolean;\n  onSelect: (param: any) => void;\n  onSuggest?: (results: any[]) => void;\n  onInputBlur?: (event: any) => void;\n  onInputFocus?: (event: any) => void;\n\n  /**\n   * Override css classes to input.\n   */\n  inputClasses?: any; \n\n  /**\n   * Override input container props.\n   */\n  inputPaperProps?: Partial<PaperProps>;\n\n  /**\n   * Override suggestions container props.\n   */\n  suggestionsPaperProps?: PaperProps;\n\n  /**\n   * If textFieldsProps is provided, these props will be ignored.\n   */\n  inputProps?: Partial<InputBaseProps>;\n\n  /**\n   * Specify if you want the input to be a TextField instead of a MUI input. rawInputProps will be ignored.\n   */\n  textFieldProps?: Partial<TextFieldProps>;\n  \n  showInputContainer?: boolean;\n};\n\nconst SearchInput = ({...props}: Partial<InputBaseProps>) => {\n  return (\n    <InputBase\n      type=\"search\"\n      fullWidth\n      startAdornment={\n        <InputAdornment position=\"start\">\n          <SearchIcon color=\"action\" />\n        </InputAdornment>\n      }\n      {...props}\n    />\n  );\n};\n\nconst SearchTextField = ({...props}: Partial<TextFieldProps>) => {\n  return (\n    <TextField\n      type=\"search\"\n      fullWidth\n      InputProps={{\n        startAdornment: (\n          <InputAdornment position=\"start\">\n            <SearchIcon color=\"action\" />\n          </InputAdornment>\n        ),\n      }}\n      {...props}\n    />\n  );\n};\n\n/**\n * Geocoder component: connects to Mapbox.com Geocoding API\n * and provides an auto-completing interface for finding locations.\n */\nconst MatGeocoder = ({\n  endpoint = 'https://api.mapbox.com',\n  inputPlaceholder = 'Search',\n  showLoader = true,\n  source = 'mapbox.places',\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  onSuggest = () => {},\n  focusOnMount = false,\n  showInputContainer = true,\n  inputValue = '',\n  proximity,\n  country,\n  bbox,\n  types,\n  limit,\n  autocomplete,\n  language,\n  suggestionsPaperProps,\n  onSelect,\n  accessToken,\n  onInputFocus,\n  onInputBlur,\n  inputClasses,\n  inputProps: inputPropsParam,\n  textFieldProps,\n  inputPaperProps,\n}: Props) => {\n\n  const [results, setResults] = useState<Result[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [searchTime, setSearchTime] = useState(new Date());\n  const [value, setValue] = useState(inputValue);\n  const [inputIsFocused, setInputIsFocused] = useState(false);\n\n  const autoSuggestRef = useRef<Autosuggest>(null);\n  const prevValue = usePrevious(value);\n\n  const focusInput = useCallback(() => {\n    const {input = null} = autoSuggestRef.current || {};\n    input && input.focus();\n  }, []);\n\n  useEffect(() => {\n    setValue(inputValue);\n  }, [inputValue]);\n\n  useEffect(() => {\n    if (focusOnMount) {\n      focusInput();\n    }\n  }, [focusOnMount, focusInput]);\n\n  useEffect(() => {\n    onSuggest && onSuggest(results);\n  }, [results, onSuggest]);\n\n  const handleClearInput = useCallback(() => {\n    setValue('');\n    // After clear button is clicked the input should be re-focused automatically.\n    focusInput();\n  }, [focusInput]);\n\n  const theme = useTheme();\n\n  const renderInput = useCallback(\n\n    (renderInputProps) => {\n\n      const {ref, inputClasses, ...other} = renderInputProps;\n      const {...restInputPaperProps} = inputPaperProps ?? {};\n\n      let searchInput = (\n        <SearchInput\n          classes={inputClasses}\n          inputRef={ref}\n          {...other}\n          {...inputPropsParam}\n        />\n      );\n\n      if (textFieldProps) {\n        searchInput = (\n          <SearchTextField\n            classes={inputClasses}\n            inputRef={ref}\n            {...other}\n            {...textFieldProps}\n          />\n        )\n      }\n\n      if (!showInputContainer) {\n        return searchInput;\n      }\n\n      return (\n        <>\n          <DebouncedProgressBar show={loading && showLoader} />\n          <Paper\n            square={false}\n            elevation={1}\n            sx={{\n              paddingTop: 1,\n              paddingBottom: 1,\n              paddingRight: 1, // IconButton on right provides sufficient padding\n              paddingLeft: 2,\n              backgroundColor: inputIsFocused\n                ? theme.palette.background.paper\n                : alpha(theme.palette.background.paper, 0.9),\n              overflow: 'hidden',\n              '&:hover,&:active': {\n                backgroundColor: theme.palette.background.paper,\n              },\n              // Maintain a consistent height when IconButton (CancelIcon) is visible.\n              minHeight: '64px',\n              display: 'flex',\n              flexDirection: 'column',\n              justifyContent: 'center',\n              //...\n            }}\n            {...restInputPaperProps}\n          >\n            <Box display=\"flex\" flexDirection=\"row\" alignItems=\"center\">\n              <Box flex=\"auto\" sx={{flexShrink: 0, flexGrow: 1}}>\n                {searchInput}\n              </Box>\n              {/* Unmount and mount releases space for TexField to grow AND show animation. */}\n              <Fade\n                in={value.length > 0}\n                unmountOnExit={true}\n                mountOnEnter={true}\n              >\n                <Box\n                  flex=\"auto\"\n                  sx={{\n                    flexGrow: 0,\n                    flexShrink: 1,\n                  }}\n                >\n                  <IconButton\n                    aria-label=\"Clear Search Input\"\n                    onClick={handleClearInput}\n                    size=\"large\"\n                  >\n                    <CancelIcon />\n                  </IconButton>\n                </Box>\n              </Fade>\n            </Box>\n          </Paper>\n        </>\n      );\n    },\n    [\n      inputPropsParam,\n      textFieldProps,\n      showInputContainer,\n      loading,\n      showLoader,\n      inputIsFocused,\n      inputPaperProps,\n      value.length,\n      handleClearInput,\n      theme,\n    ]\n  );\n\n  const focusInputHandler = useCallback(\n    (e: React.FocusEvent<any>) => {\n      setInputIsFocused(true);\n      onInputFocus && onInputFocus(e);\n    },\n    [onInputFocus]\n  );\n\n  const blurInputHandler = useCallback(\n    (e) => {\n      setInputIsFocused(false);\n      onInputBlur && onInputBlur(e);\n    },\n    [onInputBlur]\n  );\n\n  const renderSuggestionsContainer = useCallback(\n    (options) => {\n      const {containerProps, children} = options;\n      return (\n        <Paper\n          {...containerProps}\n          square={false}\n          elevation={4}\n          {...suggestionsPaperProps}\n        >\n          {children}\n        </Paper>\n      );\n    },\n    [suggestionsPaperProps]\n  );\n\n  const onResult = useCallback(\n    (err: any, fc: any, st: Date) => {\n      // searchTime is compared with the last search to set the state\n      // to ensure that a slow xhr response does not scramble the\n      // sequence of autocomplete display.\n      if (!err && fc && fc.features && searchTime <= st) {\n        setSearchTime(st);\n        setResults(\n          fc.features\n            .map((feature: any) => ({\n              feature: feature,\n              label: feature.place_name,\n            }))\n            .filter((feature: any) => feature.label)\n        );\n        setLoading(false);\n      }\n    },\n    [searchTime]\n  );\n\n  const handleSuggestionsFetchRequested = useCallback(\n    ({value}) => {\n      setLoading(true);\n      if (prevValue === value) {\n        setLoading(false);\n      } else if (value === '') {\n        setResults([]);\n        setLoading(false);\n      } else {\n        search(\n          endpoint,\n          source,\n          accessToken,\n          value,\n          onResult,\n          proximity,\n          country,\n          bbox,\n          types,\n          limit,\n          autocomplete,\n          language\n        );\n      }\n    },\n    [\n      bbox,\n      country,\n      endpoint,\n      limit,\n      language,\n      autocomplete,\n      source,\n      proximity,\n      prevValue,\n      onResult,\n      types,\n      accessToken,\n    ]\n  );\n\n  /**\n   * Parameters Signature:\n   * (event, {suggestion, suggestionValue, suggestionIndex, sectionIndex, method})\n   */\n  const handleSuggestionSelected = useCallback(\n    (_event, {suggestion}) => {\n      onSelect && onSelect(suggestion.feature);\n      // focus on the input after click to maintain key traversal\n      // this.inputRef.current && this.inputRef.current.focus()\n      return false;\n    },\n    [onSelect]\n  );\n\n  const handleSuggestionsClearRequested = useCallback(() => {\n    setResults([]);\n  }, []);\n\n  const handleChange = useCallback((_event, {newValue}) => {\n    setValue(newValue);\n  }, []);\n\n  const renderSuggestion = useCallback((suggestion, {query, isHighlighted}) => {\n    const matches = match(suggestion.label, query);\n    const parts = parse(suggestion.label, matches);\n\n    return (\n      <MenuItem selected={isHighlighted} component=\"div\">\n        <Typography noWrap variant=\"subtitle1\">\n          {parts.map(\n            (part: {highlight: boolean; text: string}, index: number) => (\n              <Typography\n                key={index}\n                component=\"span\"\n                variant=\"inherit\"\n                sx={{fontWeight: part.highlight ? 500 : 300}}\n              >\n                {part.text}\n              </Typography>\n            )\n          )}\n        </Typography>\n      </MenuItem>\n    );\n  }, []);\n\n  const getResultValue = useCallback((result: any) => result.label, []);\n\n  if (!accessToken) {\n    return null;\n  }\n\n  return (\n    <Box\n      sx={{\n        // https://github.com/moroshko/react-autosuggest#theme-optional\n        '& .react-autosuggest__container': {\n          flexGrow: 1,\n          position: 'relative',\n        },\n        '& .react-autosuggest__suggestions-container--open': {\n          position: 'absolute',\n          zIndex: 1,\n          marginTop: 1,\n          left: 0,\n          right: 0,\n        },\n        '& .react-autosuggest__suggestions-list': {\n          margin: 0,\n          padding: 0,\n          listStyleType: 'none',\n        },\n        '& .react-autosuggest__suggestion': {\n          display: 'block',\n          marginBottom: 0,\n        },\n      }}\n    >\n      <Autosuggest\n        ref={autoSuggestRef}\n        renderInputComponent={renderInput}\n        suggestions={results}\n        onSuggestionsFetchRequested={handleSuggestionsFetchRequested}\n        onSuggestionsClearRequested={handleSuggestionsClearRequested}\n        onSuggestionSelected={handleSuggestionSelected}\n        renderSuggestionsContainer={renderSuggestionsContainer}\n        getSuggestionValue={getResultValue}\n        renderSuggestion={renderSuggestion}\n        inputProps={{\n          placeholder: inputPlaceholder,\n          value: value,\n          onChange: handleChange,\n          onFocus: focusInputHandler,\n          onBlur: blurInputHandler,\n          className: inputClasses,\n        }}\n      />\n    </Box>\n  );\n};\n\nexport default MatGeocoder;\n","import {useEffect, useRef} from 'react';\n\nfunction usePrevious<T>(value: T) {\n  // The ref object is a generic container whose current property is mutable ...\n\n  // ... and can hold any value, similar to an instance property on a class\n\n  const ref = useRef<T>();\n\n  // Store current value in ref\n\n  useEffect(() => {\n    ref.current = value;\n  }, [value]); // Only re-run if value changes\n\n  // Return previous value (happens before update in useEffect above)\n\n  return ref.current;\n}\n\nexport default usePrevious;\n"],"names":["isNotNil","value","DebouncedProgressBar","_ref","show","showProp","_ref$show","_useState","useState","setShow","setShowTrue","useDebouncedCallback","useEffect","flush","React","createElement","Fade","in","LinearProgress","style","position","width","SearchInput","props","_extends","InputBase","type","fullWidth","startAdornment","InputAdornment","SearchIcon","color","SearchTextField","_ref2","TextField","InputProps","_ref3","endpoint","_ref3$endpoint","_ref3$inputPlaceholde","inputPlaceholder","_ref3$showLoader","showLoader","_ref3$source","source","_ref3$onSuggest","onSuggest","_ref3$focusOnMount","focusOnMount","_ref3$showInputContai","showInputContainer","_ref3$inputValue","inputValue","proximity","country","bbox","types","limit","autocomplete","language","suggestionsPaperProps","onSelect","accessToken","onInputFocus","onInputBlur","inputClasses","inputPropsParam","inputProps","textFieldProps","inputPaperProps","results","setResults","_useState2","loading","setLoading","_useState3","Date","searchTime","setSearchTime","_useState4","setValue","_useState5","inputIsFocused","setInputIsFocused","autoSuggestRef","useRef","prevValue","ref","current","usePrevious","focusInput","useCallback","_ref4$input","input","focus","handleClearInput","theme","useTheme","renderInput","renderInputProps","other","_objectWithoutPropertiesLoose","_excluded","restInputPaperProps","searchInput","classes","inputRef","Fragment","Paper","square","elevation","sx","paddingTop","paddingBottom","paddingRight","paddingLeft","backgroundColor","palette","background","paper","alpha","overflow","minHeight","display","flexDirection","justifyContent","Box","alignItems","flex","flexShrink","flexGrow","length","unmountOnExit","mountOnEnter","IconButton","onClick","size","CancelIcon","focusInputHandler","e","blurInputHandler","renderSuggestionsContainer","options","children","containerProps","onResult","err","fc","st","features","map","feature","label","place_name","filter","handleSuggestionsFetchRequested","_ref6","query","baseUrl","searchParams","url","res","Promise","resolve","access_token","Object","keys","longitude","latitude","join","params","key","encodeURIComponent","fetch","then","_fetch","json","_res$json","_catch","reject","search","handleSuggestionSelected","_event","_ref7","suggestion","handleSuggestionsClearRequested","handleChange","_ref8","newValue","renderSuggestion","_ref9","isHighlighted","matches","match","parts","parse","MenuItem","selected","component","Typography","noWrap","variant","part","index","fontWeight","highlight","text","getResultValue","result","zIndex","marginTop","left","right","margin","padding","listStyleType","marginBottom","Autosuggest","renderInputComponent","suggestions","onSuggestionsFetchRequested","onSuggestionsClearRequested","onSuggestionSelected","getSuggestionValue","placeholder","onChange","onFocus","onBlur","className"],"mappings":"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"}