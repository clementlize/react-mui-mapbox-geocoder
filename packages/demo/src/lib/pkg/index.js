var e=require("react"),t=require("react-autosuggest"),n=require("autosuggest-highlight/match"),a=require("autosuggest-highlight/parse"),r=require("@mui/material"),u=require("@mui/icons-material/Search"),l=require("@mui/icons-material/Cancel"),o=require("use-debounce");function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var s=i(e),c=i(t),f=i(n),d=i(a),p=i(u),g=i(l);function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function h(e){return null!=e}var b=function(t){var n=t.show,a=void 0!==n&&n,u=e.useState(a),l=u[0],i=u[1],c=o.useDebouncedCallback(function(){return i(!0)},250);return e.useEffect(function(){a?c():(c.flush(),i(!1))},[c,a]),s.default.createElement(r.Fade,{in:l},s.default.createElement(r.LinearProgress,{style:{position:"absolute",width:"100%"}}))},v=["ref","inputClasses"];module.exports=function(t){var n=t.endpoint,a=void 0===n?"https://api.mapbox.com":n,u=t.inputPlaceholder,l=void 0===u?"Search":u,o=t.showLoader,i=void 0===o||o,C=t.source,k=void 0===C?"mapbox.places":C,x=t.onSuggest,E=void 0===x?function(){}:x,y=t.focusOnMount,S=void 0!==y&&y,P=t.showInputContainer,w=void 0===P||P,q=t.inputValue,I=void 0===q?"":q,j=t.proximity,T=t.country,O=t.bbox,_=t.types,F=t.limit,R=t.autocomplete,B=t.language,G=t.suggestionsPaperProps,D=t.onSelect,U=t.accessToken,L=t.onInputFocus,V=t.onInputBlur,W=t.inputClasses,z=t.inputTextFieldProps,A=t.disableUnderline,H=t.inputPaperProps,M=e.useState([]),N=M[0],J=M[1],K=e.useState(!1),Q=K[0],X=K[1],Y=e.useState(new Date),Z=Y[0],$=Y[1],ee=e.useState(I),te=ee[0],ne=ee[1],ae=e.useState(!1),re=ae[0],ue=ae[1],le=e.useRef(null),oe=function(t){var n=e.useRef();return e.useEffect(function(){n.current=t},[t]),n.current}(te),ie=e.useCallback(function(){var e=(le.current||{}).input,t=void 0===e?null:e;t&&t.focus()},[]);e.useEffect(function(){ne(I)},[I]),e.useEffect(function(){S&&ie()},[S,ie]),e.useEffect(function(){E&&E(N)},[N,E]);var se=e.useCallback(function(){ne(""),ie()},[ie]),ce=r.useTheme(),fe=e.useCallback(function(e){var t=e.ref,n=e.inputClasses,a=function(e,t){if(null==e)return{};var n,a,r={},u=Object.keys(e);for(a=0;a<u.length;a++)t.indexOf(n=u[a])>=0||(r[n]=e[n]);return r}(e,v),u=m({},null!=H?H:{}),l=s.default.createElement(r.TextField,m({fullWidth:!0,InputProps:m({disableUnderline:A,inputRef:t,startAdornment:s.default.createElement(r.InputAdornment,{position:"start"},s.default.createElement(p.default,{color:"action"})),classes:n},a)},z));return w?s.default.createElement(s.default.Fragment,null,s.default.createElement(b,{show:Q&&i}),s.default.createElement(r.Paper,m({square:!1,elevation:1,sx:{paddingTop:1,paddingBottom:1,paddingRight:1,paddingLeft:2,backgroundColor:re?ce.palette.background.paper:r.alpha(ce.palette.background.paper,.9),overflow:"hidden","&:hover,&:active":{backgroundColor:ce.palette.background.paper},minHeight:"64px",display:"flex",flexDirection:"column",justifyContent:"center"}},u),s.default.createElement(r.Grid,{container:!0,alignItems:"center",spacing:1,wrap:"nowrap"},s.default.createElement(r.Grid,{item:!0,xs:!0,sx:{flexShrink:0,flexGrow:1}},l),s.default.createElement(r.Fade,{in:te.length>0,unmountOnExit:!0,mountOnEnter:!0},s.default.createElement(r.Grid,{item:!0,xs:!0,sx:{flexGrow:0,flexShrink:1}},s.default.createElement(r.IconButton,{"aria-label":"Clear Search Input",onClick:se,size:"large"},s.default.createElement(g.default,null))))))):s.default.createElement(s.default.Fragment,null,l)},[A,z,w,Q,i,re,H,te.length,se,ce]),de=e.useCallback(function(e){ue(!0),L&&L(e)},[L]),pe=e.useCallback(function(e){ue(!1),V&&V(e)},[V]),ge=e.useCallback(function(e){var t=e.children;return s.default.createElement(r.Paper,m({},e.containerProps,{square:!1,elevation:4},G),t)},[G]),me=e.useCallback(function(e,t,n){!e&&t&&t.features&&Z<=n&&($(n),J(t.features.map(function(e){return{feature:e,label:e.place_name}}).filter(function(e){return e.label})),X(!1))},[Z]),he=e.useCallback(function(e){var t=e.value;X(!0),oe===t?X(!1):""===t?(J([]),X(!1)):function(e,t,n,a,r,u,l,o,i,s,c,f){try{var d,p,g,b,v=new Date;Promise.resolve(function(C,k){try{var x=(d=e+"/geocoding/v5/"+t+"/"+a+".json",p=m({},h(n)&&{access_token:n},h(u)&&{proximity:u&&2===Object.keys(u).length?u.longitude+","+u.latitude:null},h(o)&&{bbox:o&&o.length>0?o.join(","):null},h(i)&&{types:i},h(l)&&{country:l},h(s)&&{limit:s},h(c)&&{autocomplete:c},h(f)&&{language:f}),g=d+"?"+(E=p,Object.keys(E).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(E[e])}).join("&")),Promise.resolve(fetch(g)).then(function(e){return b=e,Promise.resolve(b.json()).then(function(e){return r(null,e,v),{err:null,res:b,searchTime:v}})}))}catch(e){return k(e)}var E;return x&&x.then?x.then(void 0,k):x}(0,function(e){return r(e,null,v),{err:e,res:null,searchTime:v}}))}catch(e){return Promise.reject(e)}}(a,k,U,t,me,j,T,O,_,F,R,B)},[O,T,a,F,B,R,k,j,oe,me,_,U]),be=e.useCallback(function(e,t){return D&&D(t.suggestion.feature),!1},[D]),ve=e.useCallback(function(){J([])},[]),Ce=e.useCallback(function(e,t){ne(t.newValue)},[]),ke=e.useCallback(function(e,t){var n=t.isHighlighted,a=f.default(e.label,t.query),u=d.default(e.label,a);return s.default.createElement(r.MenuItem,{selected:n,component:"div"},s.default.createElement(r.Typography,{noWrap:!0,variant:"subtitle1"},u.map(function(e,t){return s.default.createElement(r.Typography,{key:t,variant:"inherit",sx:{fontWeight:e.highlight?500:300}},e.text)})))},[]),xe=e.useCallback(function(e){return e.label},[]);return U?s.default.createElement(r.Box,{sx:{"& .react-autosuggest__container":{flexGrow:1,position:"relative"},"& .react-autosuggest__suggestions-container--open":{position:"absolute",zIndex:1,marginTop:1,left:0,right:0},"& .react-autosuggest__suggestions-list":{margin:0,padding:0,listStyleType:"none"},"& .react-autosuggest__suggestion":{display:"block",marginBottom:0}}},s.default.createElement(c.default,{ref:le,renderInputComponent:fe,suggestions:N,onSuggestionsFetchRequested:he,onSuggestionsClearRequested:ve,onSuggestionSelected:be,renderSuggestionsContainer:ge,getSuggestionValue:xe,renderSuggestion:ke,inputProps:{placeholder:l,value:te,onChange:Ce,onFocus:de,onBlur:pe,className:W}})):null};
//# sourceMappingURL=index.js.map
