import e,{useRef as t,useEffect as n,useState as r,useCallback as o}from"react";import a from"react-autosuggest";import l from"autosuggest-highlight/match";import i from"autosuggest-highlight/parse";import{Fade as s,LinearProgress as u,useTheme as c,TextField as p,InputAdornment as g,Paper as m,alpha as d,Grid as h,IconButton as f,MenuItem as b,Typography as x,Box as E}from"@mui/material";import y from"@mui/icons-material/Search";import v from"@mui/icons-material/Cancel";import{useDebouncedCallback as w}from"use-debounce";function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function k(e){return null!=e}const S=({show:t=!1})=>{const[o,a]=r(t),l=w(()=>a(!0),250);return n(()=>{t?l():(l.flush(),a(!1))},[l,t]),e.createElement(s,{in:o},e.createElement(u,{style:{position:"absolute",width:"100%"}}))},j=["ref","inputClasses"];export default({endpoint:u="https://api.mapbox.com",inputPlaceholder:w="Search",showLoader:I=!0,source:O="mapbox.places",onSuggest:P=(()=>{}),focusOnMount:_=!1,showInputContainer:T=!0,inputValue:$="",proximity:F,country:R,bbox:q,types:B,limit:U,autocomplete:D,language:G,suggestionsPaperProps:V,onSelect:W,accessToken:z,onInputFocus:H,onInputBlur:L,inputClasses:A,inputTextFieldProps:M,disableUnderline:N,inputPaperProps:J})=>{const[K,Q]=r([]),[X,Y]=r(!1),[Z,ee]=r(new Date),[te,ne]=r($),[re,oe]=r(!1),ae=t(null),le=function(e){const r=t();return n(()=>{r.current=e},[e]),r.current}(te),ie=o(()=>{const{input:e=null}=ae.current||{};e&&e.focus()},[]);n(()=>{ne($)},[$]),n(()=>{_&&ie()},[_,ie]),n(()=>{P&&P(K)},[K,P]);const se=o(()=>{ne(""),ie()},[ie]),ue=c(),ce=o(t=>{const{ref:n,inputClasses:r}=t,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t.indexOf(n=a[r])>=0||(o[n]=e[n]);return o}(t,j),a=C({},null!=J?J:{}),l=e.createElement(p,C({fullWidth:!0,InputProps:C({disableUnderline:N,inputRef:n,startAdornment:e.createElement(g,{position:"start"},e.createElement(y,{color:"action"})),classes:r},o)},M));return T?e.createElement(e.Fragment,null,e.createElement(S,{show:X&&I}),e.createElement(m,C({square:!1,elevation:1,sx:{paddingTop:1,paddingBottom:1,paddingRight:1,paddingLeft:2,backgroundColor:re?ue.palette.background.paper:d(ue.palette.background.paper,.9),overflow:"hidden","&:hover,&:active":{backgroundColor:ue.palette.background.paper},minHeight:"64px",display:"flex",flexDirection:"column",justifyContent:"center"}},a),e.createElement(h,{container:!0,alignItems:"center",spacing:1,wrap:"nowrap"},e.createElement(h,{item:!0,xs:!0,sx:{flexShrink:0,flexGrow:1}},l),e.createElement(s,{in:te.length>0,unmountOnExit:!0,mountOnEnter:!0},e.createElement(h,{item:!0,xs:!0,sx:{flexGrow:0,flexShrink:1}},e.createElement(f,{"aria-label":"Clear Search Input",onClick:se,size:"large"},e.createElement(v,null))))))):e.createElement(e.Fragment,null,l)},[N,M,T,X,I,re,J,te.length,se,ue]),pe=o(e=>{oe(!0),H&&H(e)},[H]),ge=o(e=>{oe(!1),L&&L(e)},[L]),me=o(t=>{const{containerProps:n,children:r}=t;return e.createElement(m,C({},n,{square:!1,elevation:4},V),r)},[V]),de=o((e,t,n)=>{!e&&t&&t.features&&Z<=n&&(ee(n),Q(t.features.map(e=>({feature:e,label:e.place_name})).filter(e=>e.label)),Y(!1))},[Z]),he=o(({value:e})=>{Y(!0),le===e?Y(!1):""===e?(Q([]),Y(!1)):async function(e,t,n,r,o,a,l,i,s,u,c,p){const g=new Date;try{const d=`${e}/geocoding/v5/${t}/${r}.json`,h=C({},k(n)&&{access_token:n},k(a)&&{proximity:a&&2===Object.keys(a).length?`${a.longitude},${a.latitude}`:null},k(i)&&{bbox:i&&i.length>0?i.join(","):null},k(s)&&{types:s},k(l)&&{country:l},k(u)&&{limit:u},k(c)&&{autocomplete:c},k(p)&&{language:p}),f=`${d}?${m=h,Object.keys(m).map(e=>encodeURIComponent(e)+"="+encodeURIComponent(m[e])).join("&")}`,b=await fetch(f);return o(null,await b.json(),g),{err:null,res:b,searchTime:g}}catch(e){return o(e,null,g),{err:e,res:null,searchTime:g}}var m}(u,O,z,e,de,F,R,q,B,U,D,G)},[q,R,u,U,G,D,O,F,le,de,B,z]),fe=o((e,{suggestion:t})=>(W&&W(t.feature),!1),[W]),be=o(()=>{Q([])},[]),xe=o((e,{newValue:t})=>{ne(t)},[]),Ee=o((t,{query:n,isHighlighted:r})=>{const o=l(t.label,n),a=i(t.label,o);return e.createElement(b,{selected:r,component:"div"},e.createElement(x,{noWrap:!0,variant:"subtitle1"},a.map((t,n)=>e.createElement(x,{key:n,variant:"inherit",sx:{fontWeight:t.highlight?500:300}},t.text))))},[]),ye=o(e=>e.label,[]);return z?e.createElement(E,{sx:{"& .react-autosuggest__container":{flexGrow:1,position:"relative"},"& .react-autosuggest__suggestions-container--open":{position:"absolute",zIndex:1,marginTop:1,left:0,right:0},"& .react-autosuggest__suggestions-list":{margin:0,padding:0,listStyleType:"none"},"& .react-autosuggest__suggestion":{display:"block",marginBottom:0}}},e.createElement(a,{ref:ae,renderInputComponent:ce,suggestions:K,onSuggestionsFetchRequested:he,onSuggestionsClearRequested:be,onSuggestionSelected:fe,renderSuggestionsContainer:me,getSuggestionValue:ye,renderSuggestion:Ee,inputProps:{placeholder:w,value:te,onChange:xe,onFocus:pe,onBlur:ge,className:A}})):null};
//# sourceMappingURL=index.modern.js.map
