import e,{useRef as t,useEffect as n,useState as o,useCallback as r}from"react";import a from"lodash.omitby";import i from"lodash.isnil";import s from"react-autosuggest";import l from"autosuggest-highlight/match";import u from"autosuggest-highlight/parse";import{Fade as c,LinearProgress as p,makeStyles as g,createStyles as m,TextField as h,InputAdornment as d,Paper as f,Grid as b,IconButton as y,MenuItem as x,Typography as C}from"@material-ui/core";import E from"@material-ui/icons/Search";import w from"@material-ui/icons/Cancel";import k from"clsx";import S from"react-debounce-render";import v from"color-alpha";function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function j(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)t.indexOf(n=a[o])>=0||(r[n]=e[n]);return r}var I=S(({show:t=!1})=>e.createElement(c,{in:t},e.createElement(p,{style:{position:"absolute",width:"100%"}})),100);const P=g(e=>m({container:{flexGrow:1,position:"relative"},suggestionsContainerOpen:{position:"absolute",zIndex:1,marginTop:e.spacing(1),left:0,right:0},suggestion:{display:"block",marginBottom:0},suggestionsList:{margin:0,padding:0,listStyleType:"none"},inputContainer:{paddingTop:e.spacing(1),paddingBottom:e.spacing(1),paddingRight:e.spacing(1),paddingLeft:e.spacing(2),backgroundColor:v(e.palette.background.paper,.9),overflow:"hidden","&:hover,&:active,&.inputContainerFocused":{backgroundColor:e.palette.background.paper},minHeight:"64px",display:"flex",flexDirection:"column",justifyContent:"center"},grow:{flexGrow:1},shrink:{flexShrink:1},noGrow:{flexGrow:0},noShrink:{flexShrink:0}}));export default({endpoint:p="https://api.mapbox.com",inputPlaceholder:g="Search",showLoader:m=!0,source:S="mapbox.places",onSuggest:v=(()=>{}),focusOnMount:F=!1,showInputContainer:T=!0,inputValue:$="",proximity:N,country:R,bbox:q,types:G,limit:L,autocomplete:B,language:U,suggestionsPaperProps:W,onSelect:D,accessToken:V,onInputFocus:H,onInputBlur:_,inputClasses:z,inputTextFieldProps:A,disableUnderline:M,inputPaperProps:J})=>{const[K,Q]=o([]),[X,Y]=o(!1),[Z,ee]=o(new Date),[te,ne]=o($),[oe,re]=o(!1),ae=P(),ie=t(null),se=function(e){const o=t();return n(()=>{o.current=e},[e]),o.current}(te),le=r(()=>{const{input:e=null}=ie.current||{};e&&e.focus()},[]);n(()=>{ne($)},[$]),n(()=>{F&&le()},[F,le]),n(()=>{v&&v(K)},[K,v]);const ue=r(()=>{ne(""),le()},[le]),ce=r(t=>{const{ref:n,inputClasses:o}=t,r=j(t,["ref","inputClasses"]),a=null!=J?J:{},{className:i}=a,s=j(a,["className"]),l=e.createElement(h,O({fullWidth:!0,InputProps:O({disableUnderline:M,inputRef:n,startAdornment:e.createElement(d,{position:"start"},e.createElement(E,{color:"action"})),classes:o},r)},A));return T?e.createElement(e.Fragment,null,e.createElement(I,{show:X&&m}),e.createElement(f,O({square:!1,elevation:1,className:k([ae.inputContainer,{inputContainerFocused:oe},i])},s),e.createElement(b,{container:!0,alignItems:"center",spacing:1,wrap:"nowrap"},e.createElement(b,{item:!0,xs:!0,className:k(ae.grow,ae.noShrink)},l),e.createElement(c,{in:te.length>0,unmountOnExit:!0,mountOnEnter:!0},e.createElement(b,{item:!0,xs:!0,className:k(ae.shrink,ae.noGrow)},e.createElement(y,{"aria-label":"Clear Search Input",onClick:ue},e.createElement(w,null))))))):e.createElement(e.Fragment,null,l)},[M,A,T,X,m,ae,oe,J,te.length,ue]),pe=r(e=>{re(!0),H&&H(e)},[H]),ge=r(e=>{re(!1),_&&_(e)},[_]),me=r(t=>{const{containerProps:n,children:o}=t;return e.createElement(f,O({},n,{square:!1,elevation:4},W),o)},[W]),he=r((e,t,n)=>{!e&&t&&t.features&&Z<=n&&(ee(n),Q(t.features.map(e=>({feature:e,label:e.place_name})).filter(e=>e.label)),Y(!1))},[Z]),de=r(({value:e})=>{Y(!0),se===e?Y(!1):""===e?(Q([]),Y(!1)):async function(e,t,n,o,r,s,l,u,c,p,g,m){const h=new Date;try{const f=`${e}/geocoding/v5/${t}/${o}.json`,b=a({access_token:n,proximity:s&&2===Object.keys(s).length?`${s.longitude},${s.latitude}`:null,bbox:u&&u.length>0?u.join(","):null,types:c,country:l,limit:p,autocomplete:g,language:m},i),y=`${f}?${d=b,Object.keys(d).map(e=>encodeURIComponent(e)+"="+encodeURIComponent(d[e])).join("&")}`,x=await fetch(y);return r(null,await x.json(),h),{err:null,res:x,searchTime:h}}catch(e){return r(e,null,h),{err:e,res:null,searchTime:h}}var d}(p,S,V,e,he,N,R,q,G,L,B,U)},[q,R,p,L,U,B,S,N,se,he,G,V]),fe=r((e,{suggestion:t})=>(D&&D(t.feature),!1),[D]),be=r(()=>{Q([])},[]),ye=r((e,{newValue:t})=>{ne(t)},[]),xe=r((t,{query:n,isHighlighted:o})=>{const r=l(t.label,n),a=u(t.label,r);return e.createElement(x,{selected:o,component:"div"},e.createElement(C,{noWrap:!0,variant:"subtitle1"},a.map((t,n)=>t.highlight?e.createElement("span",{key:String(n),style:{fontWeight:500}},t.text):e.createElement("strong",{key:String(n),style:{fontWeight:300}},t.text))))},[]),Ce=r(e=>e.label,[]);return V?e.createElement(s,{ref:ie,theme:{container:ae.container,suggestionsContainerOpen:ae.suggestionsContainerOpen,suggestionsList:ae.suggestionsList,suggestion:ae.suggestion},renderInputComponent:ce,suggestions:K,onSuggestionsFetchRequested:de,onSuggestionsClearRequested:be,onSuggestionSelected:fe,renderSuggestionsContainer:me,getSuggestionValue:Ce,renderSuggestion:xe,inputProps:{placeholder:g,value:te,onChange:ye,onFocus:pe,onBlur:ge,className:z}}):null};
//# sourceMappingURL=index.modern.js.map
