!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react"),require("lodash.omitby"),require("lodash.isnil"),require("react-autosuggest"),require("autosuggest-highlight/match"),require("autosuggest-highlight/parse"),require("@material-ui/core"),require("@material-ui/icons/Search"),require("@material-ui/icons/Cancel"),require("clsx"),require("react-debounce-render"),require("color-alpha")):"function"==typeof define&&define.amd?define(["react","lodash.omitby","lodash.isnil","react-autosuggest","autosuggest-highlight/match","autosuggest-highlight/parse","@material-ui/core","@material-ui/icons/Search","@material-ui/icons/Cancel","clsx","react-debounce-render","color-alpha"],t):(e||self).reactMuiMapboxGeocoder=t(e.react,e.omitBy,e.isNil,e.reactAutosuggest,e.match,e.parse,e.core,e.SearchIcon,e.CancelIcon,e.clsx,e.reactDebounceRender,e.colorAlpha)}(this,function(e,t,n,a,r,o,u,i,l,s,c,f){function d(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var g=d(e),p=d(t),m=d(n),h=d(a),b=d(r),v=d(o),C=d(i),y=d(l),k=d(s),x=d(c),S=d(f);function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function w(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)t.indexOf(n=o[a])>=0||(r[n]=e[n]);return r}var q=x.default(function(e){var t=e.show;return g.default.createElement(u.Fade,{in:void 0!==t&&t},g.default.createElement(u.LinearProgress,{style:{position:"absolute",width:"100%"}}))},100),P=u.makeStyles(function(e){return u.createStyles({container:{flexGrow:1,position:"relative"},suggestionsContainerOpen:{position:"absolute",zIndex:1,marginTop:e.spacing(1),left:0,right:0},suggestion:{display:"block",marginBottom:0},suggestionsList:{margin:0,padding:0,listStyleType:"none"},inputContainer:{paddingTop:e.spacing(1),paddingBottom:e.spacing(1),paddingRight:e.spacing(1),paddingLeft:e.spacing(2),backgroundColor:S.default(e.palette.background.paper,.9),overflow:"hidden","&:hover,&:active,&.inputContainerFocused":{backgroundColor:e.palette.background.paper},minHeight:"64px",display:"flex",flexDirection:"column",justifyContent:"center"},grow:{flexGrow:1},shrink:{flexShrink:1},noGrow:{flexGrow:0},noShrink:{flexShrink:0}})});return function(t){var n=t.endpoint,a=void 0===n?"https://api.mapbox.com":n,r=t.inputPlaceholder,o=void 0===r?"Search":r,i=t.showLoader,l=void 0===i||i,s=t.source,c=void 0===s?"mapbox.places":s,f=t.onSuggest,d=void 0===f?function(){}:f,x=t.focusOnMount,S=void 0!==x&&x,I=t.showInputContainer,j=void 0===I||I,O=t.inputValue,F=void 0===O?"":O,T=t.proximity,G=t.country,R=t.bbox,N=t.types,B=t.limit,L=t.autocomplete,A=t.language,D=t.suggestionsPaperProps,M=t.onSelect,U=t.accessToken,W=t.onInputFocus,V=t.onInputBlur,H=t.inputClasses,_=t.inputTextFieldProps,z=t.disableUnderline,J=t.inputPaperProps,K=e.useState([]),Q=K[0],X=K[1],Y=e.useState(!1),Z=Y[0],$=Y[1],ee=e.useState(new Date),te=ee[0],ne=ee[1],ae=e.useState(F),re=ae[0],oe=ae[1],ue=e.useState(!1),ie=ue[0],le=ue[1],se=P(),ce=e.useRef(null),fe=function(t){var n=e.useRef();return e.useEffect(function(){n.current=t},[t]),n.current}(re),de=e.useCallback(function(){var e=(ce.current||{}).input,t=void 0===e?null:e;t&&t.focus()},[]);e.useEffect(function(){oe(F)},[F]),e.useEffect(function(){S&&de()},[S,de]),e.useEffect(function(){d&&d(Q)},[Q,d]);var ge=e.useCallback(function(){oe(""),de()},[de]),pe=e.useCallback(function(e){var t=e.ref,n=e.inputClasses,a=w(e,["ref","inputClasses"]),r=null!=J?J:{},o=r.className,i=w(r,["className"]),s=g.default.createElement(u.TextField,E({fullWidth:!0,InputProps:E({disableUnderline:z,inputRef:t,startAdornment:g.default.createElement(u.InputAdornment,{position:"start"},g.default.createElement(C.default,{color:"action"})),classes:n},a)},_));return j?g.default.createElement(g.default.Fragment,null,g.default.createElement(q,{show:Z&&l}),g.default.createElement(u.Paper,E({square:!1,elevation:1,className:k.default([se.inputContainer,{inputContainerFocused:ie},o])},i),g.default.createElement(u.Grid,{container:!0,alignItems:"center",spacing:8,wrap:"nowrap"},g.default.createElement(u.Grid,{item:!0,xs:!0,className:k.default(se.grow,se.noShrink)},s),g.default.createElement(u.Fade,{in:re.length>0,unmountOnExit:!0,mountOnEnter:!0},g.default.createElement(u.Grid,{item:!0,xs:!0,className:k.default(se.shrink,se.noGrow)},g.default.createElement(u.IconButton,{"aria-label":"Clear Search Input",onClick:ge},g.default.createElement(y.default,null))))))):g.default.createElement(g.default.Fragment,null,s)},[z,_,j,Z,l,se,ie,J,re.length,ge]),me=e.useCallback(function(e){le(!0),W&&W(e)},[W]),he=e.useCallback(function(e){le(!1),V&&V(e)},[V]),be=e.useCallback(function(e){var t=e.children;return g.default.createElement(u.Paper,E({},e.containerProps,{square:!1,elevation:4},D),t)},[D]),ve=e.useCallback(function(e,t,n){!e&&t&&t.features&&te<=n&&(ne(n),X(t.features.map(function(e){return{feature:e,label:e.place_name}}).filter(function(e){return e.label})),$(!1))},[te]),Ce=e.useCallback(function(e){var t=e.value;$(!0),fe===t?$(!1):""===t?(X([]),$(!1)):function(e,t,n,a,r,o,u,i,l,s,c,f){try{var d,g,h,b,v=new Date;Promise.resolve(function(C,y){try{var k=(d=e+"/geocoding/v5/"+t+"/"+a+".json",g=p.default({access_token:n,proximity:o&&2===Object.keys(o).length?o.longitude+","+o.latitude:null,bbox:i&&i.length>0?i.join(","):null,types:l,country:u,limit:s,autocomplete:c,language:f},m.default),h=d+"?"+(x=g,Object.keys(x).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(x[e])}).join("&")),Promise.resolve(fetch(h)).then(function(e){return b=e,Promise.resolve(b.json()).then(function(e){return r(null,e,v),{err:null,res:b,searchTime:v}})}))}catch(e){return y(e)}var x;return k&&k.then?k.then(void 0,y):k}(0,function(e){return r(e,null,v),{err:e,res:null,searchTime:v}}))}catch(e){return Promise.reject(e)}}(a,c,U,t,ve,T,G,R,N,B,L,A)},[R,G,a,B,A,L,c,T,fe,ve,N,U]),ye=e.useCallback(function(e,t){return M&&M(t.suggestion.feature),!1},[M]),ke=e.useCallback(function(){X([])},[]),xe=e.useCallback(function(e,t){oe(t.newValue)},[]),Se=e.useCallback(function(e,t){var n=t.isHighlighted,a=b.default(e.label,t.query),r=v.default(e.label,a);return g.default.createElement(u.MenuItem,{selected:n,component:"div"},g.default.createElement(u.Typography,{noWrap:!0,variant:"subtitle1"},r.map(function(e,t){return e.highlight?g.default.createElement("span",{key:String(t),style:{fontWeight:500}},e.text):g.default.createElement("strong",{key:String(t),style:{fontWeight:300}},e.text)})))},[]),Ee=e.useCallback(function(e){return e.label},[]);return U?g.default.createElement(h.default,{ref:ce,theme:{container:se.container,suggestionsContainerOpen:se.suggestionsContainerOpen,suggestionsList:se.suggestionsList,suggestion:se.suggestion},renderInputComponent:pe,suggestions:Q,onSuggestionsFetchRequested:Ce,onSuggestionsClearRequested:ke,onSuggestionSelected:ye,renderSuggestionsContainer:be,getSuggestionValue:Ee,renderSuggestion:Se,inputProps:{placeholder:o,value:re,onChange:xe,onFocus:me,onBlur:he,className:H}}):null}});
//# sourceMappingURL=index.umd.js.map
