!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react"),require("react-autosuggest"),require("autosuggest-highlight/match"),require("autosuggest-highlight/parse"),require("@mui/material"),require("@mui/icons-material/Search"),require("@mui/icons-material/Cancel"),require("use-debounce")):"function"==typeof define&&define.amd?define(["react","react-autosuggest","autosuggest-highlight/match","autosuggest-highlight/parse","@mui/material","@mui/icons-material/Search","@mui/icons-material/Cancel","use-debounce"],t):(e||self).reactMuiMapboxGeocoder=t(e.react,e.reactAutosuggest,e.match,e.parse,e.material,e.SearchIcon,e.CancelIcon,e.useDebounce)}(this,function(e,t,n,a,u,r,o,l){function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var s=i(e),c=i(t),f=i(n),d=i(a),g=i(r),p=i(o);function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function h(e,t){if(null==e)return{};var n,a,u={},r=Object.keys(e);for(a=0;a<r.length;a++)t.indexOf(n=r[a])>=0||(u[n]=e[n]);return u}function b(e){return null!=e}var v=function(t){var n=t.show,a=void 0!==n&&n,r=e.useState(a),o=r[0],i=r[1],c=l.useDebouncedCallback(function(){return i(!0)},250);return e.useEffect(function(){a?c():(c.flush(),i(!1))},[c,a]),s.default.createElement(u.Fade,{in:o},s.default.createElement(u.LinearProgress,{style:{position:"absolute",width:"100%"}}))},C=["ref","inputClasses"],x=["onFocus"];return function(t){var n=t.endpoint,a=void 0===n?"https://api.mapbox.com":n,r=t.inputPlaceholder,o=void 0===r?"Search":r,l=t.showLoader,i=void 0===l||l,y=t.source,k=void 0===y?"mapbox.places":y,E=t.onSuggest,S=void 0===E?function(){}:E,P=t.focusOnMount,w=void 0!==P&&P,I=t.showInputContainer,j=void 0===I||I,q=t.inputValue,T=void 0===q?"":q,F=t.proximity,O=t.country,_=t.bbox,R=t.types,G=t.limit,B=t.autocomplete,D=t.language,M=t.suggestionsPaperProps,U=t.onSelect,A=t.accessToken,L=t.onInputFocus,V=t.onInputBlur,W=t.inputClasses,z=t.inputTextFieldProps,H=t.disableUnderline,N=t.inputPaperProps,J=e.useState([]),K=J[0],Q=J[1],X=e.useState(!1),Y=X[0],Z=X[1],$=e.useState(new Date),ee=$[0],te=$[1],ne=e.useState(T),ae=ne[0],ue=ne[1],re=e.useState(!1),oe=re[0],le=re[1],ie=e.useRef(null),se=function(t){var n=e.useRef();return e.useEffect(function(){n.current=t},[t]),n.current}(ae),ce=e.useCallback(function(){var e=(ie.current||{}).input,t=void 0===e?null:e;t&&t.focus()},[]);e.useEffect(function(){ue(T)},[T]),e.useEffect(function(){w&&ce()},[w,ce]),e.useEffect(function(){S&&S(K)},[K,S]);var fe=e.useCallback(function(){ue(""),ce()},[ce]),de=u.useTheme(),ge=e.useCallback(function(e){var t=e.ref,n=e.inputClasses,a=h(e,C),r=m({},null!=N?N:{}),o=a.onFocus,l=h(a,x);console.log(o),console.log(l);var c=function(){return s.default.createElement(u.TextField,m({variant:"standard",fullWidth:!0,InputProps:m({disableUnderline:H,inputRef:t,startAdornment:s.default.createElement(u.InputAdornment,{position:"start"},s.default.createElement(g.default,{color:"action"})),classes:n},l)},z))};return j?s.default.createElement(s.default.Fragment,null,s.default.createElement(v,{show:Y&&i}),s.default.createElement(u.Paper,m({square:!1,elevation:1,sx:{paddingTop:1,paddingBottom:1,paddingRight:1,paddingLeft:2,backgroundColor:oe?de.palette.background.paper:u.alpha(de.palette.background.paper,.9),overflow:"hidden","&:hover,&:active":{backgroundColor:de.palette.background.paper},minHeight:"64px",display:"flex",flexDirection:"column",justifyContent:"center"}},r),s.default.createElement(u.Grid,{container:!0,alignItems:"center",spacing:1,wrap:"nowrap"},s.default.createElement(u.Grid,{item:!0,xs:!0,sx:{flexShrink:0,flexGrow:1}},s.default.createElement(c,null)),s.default.createElement(u.Fade,{in:ae.length>0,unmountOnExit:!0,mountOnEnter:!0},s.default.createElement(u.Grid,{item:!0,xs:!0,sx:{flexGrow:0,flexShrink:1}},s.default.createElement(u.IconButton,{"aria-label":"Clear Search Input",onClick:fe,size:"large"},s.default.createElement(p.default,null))))))):s.default.createElement(c,null)},[H,z,j,Y,i,oe,N,ae.length,fe,de]),pe=e.useCallback(function(e){le(!0),L&&L(e)},[L]),me=e.useCallback(function(e){le(!1),V&&V(e)},[V]),he=e.useCallback(function(e){var t=e.children;return s.default.createElement(u.Paper,m({},e.containerProps,{square:!1,elevation:4},M),t)},[M]),be=e.useCallback(function(e,t,n){!e&&t&&t.features&&ee<=n&&(te(n),Q(t.features.map(function(e){return{feature:e,label:e.place_name}}).filter(function(e){return e.label})),Z(!1))},[ee]),ve=e.useCallback(function(e){var t=e.value;Z(!0),se===t?Z(!1):""===t?(Q([]),Z(!1)):function(e,t,n,a,u,r,o,l,i,s,c,f){try{var d,g,p,h,v=new Date;Promise.resolve(function(C,x){try{var y=(d=e+"/geocoding/v5/"+t+"/"+a+".json",g=m({},b(n)&&{access_token:n},b(r)&&{proximity:r&&2===Object.keys(r).length?r.longitude+","+r.latitude:null},b(l)&&{bbox:l&&l.length>0?l.join(","):null},b(i)&&{types:i},b(o)&&{country:o},b(s)&&{limit:s},b(c)&&{autocomplete:c},b(f)&&{language:f}),p=d+"?"+(k=g,Object.keys(k).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(k[e])}).join("&")),Promise.resolve(fetch(p)).then(function(e){return h=e,Promise.resolve(h.json()).then(function(e){return u(null,e,v),{err:null,res:h,searchTime:v}})}))}catch(e){return x(e)}var k;return y&&y.then?y.then(void 0,x):y}(0,function(e){return u(e,null,v),{err:e,res:null,searchTime:v}}))}catch(e){return Promise.reject(e)}}(a,k,A,t,be,F,O,_,R,G,B,D)},[_,O,a,G,D,B,k,F,se,be,R,A]),Ce=e.useCallback(function(e,t){return U&&U(t.suggestion.feature),!1},[U]),xe=e.useCallback(function(){Q([])},[]),ye=e.useCallback(function(e,t){ue(t.newValue)},[]),ke=e.useCallback(function(e,t){var n=t.isHighlighted,a=f.default(e.label,t.query),r=d.default(e.label,a);return s.default.createElement(u.MenuItem,{selected:n,component:"div"},s.default.createElement(u.Typography,{noWrap:!0,variant:"subtitle1"},r.map(function(e,t){return s.default.createElement(u.Typography,{key:t,component:"span",variant:"inherit",sx:{fontWeight:e.highlight?500:300}},e.text)})))},[]),Ee=e.useCallback(function(e){return e.label},[]);return A?s.default.createElement(u.Box,{sx:{"& .react-autosuggest__container":{flexGrow:1,position:"relative"},"& .react-autosuggest__suggestions-container--open":{position:"absolute",zIndex:1,marginTop:1,left:0,right:0},"& .react-autosuggest__suggestions-list":{margin:0,padding:0,listStyleType:"none"},"& .react-autosuggest__suggestion":{display:"block",marginBottom:0}}},s.default.createElement(c.default,{ref:ie,renderInputComponent:ge,suggestions:K,onSuggestionsFetchRequested:ve,onSuggestionsClearRequested:xe,onSuggestionSelected:Ce,renderSuggestionsContainer:he,getSuggestionValue:Ee,renderSuggestion:ke,inputProps:{placeholder:o,value:ae,onChange:ye,onFocus:pe,onBlur:me,className:W}})):null}});
//# sourceMappingURL=index.umd.js.map
